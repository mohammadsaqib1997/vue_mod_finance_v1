#container.wrap-content.container
    section#page-title
        .row
            .col-sm-8
                h1.mainTitle Master Files
                span.mainDescription Chart of Accounts
            ol.breadcrumb
                li
                    span Master Files
                li.active
                    span Master Detail
    .container-fluid.container-fullw.bg-white
        .row
            .col-md-12
                h2 Master Detail
                .row
                    .col-md-12
                        .form-group
                            .row
                                .col-md-4
                                    div.text-center(v-if='dataLoad5')
                                        i.fa.fa-refresh.fa-spin.fa-fw.fa-2x
                                    select.form-control(v-else v-model='sel_master_det')
                                        option(value='') Select Master Detail
                                        option(v-for='(row, key, ind) in masterDetailsData' v-bind:value='key') {{ row.allotee_code }} | {{ row.allotee_name }}
                hr
                p
                    | Create one Master Detail.
                form#form
                    .row
                        .col-md-12
                            .row
                                .col-md-4
                                    .form-group
                                        label
                                            | Project
                                        div.text-center(v-if='dataLoad1')
                                            i.fa.fa-refresh.fa-spin.fa-fw.fa-2x
                                        template(v-else)
                                            select.form-control(v-model='sel_project')
                                                option(value='') Select Project
                                                option(v-for='(row, key, ind) in proData' v-bind:value='key') {{ row.name }}
                                            p.text-danger.text-right(v-if='validation.hasError("sel_project")') {{ validation.firstError('sel_project') }}
                                    .form-group
                                        label
                                            | Allotee Code
                                        input.form-control(type='text', v-model='allotee_code', placeholder='Enter your Allotee Code')
                                        p.text-danger.text-right(v-if='validation.hasError("allotee_code")') {{ validation.firstError('allotee_code') }}
                                        .text-right(v-if='validation.isValidating("allotee_code")')
                                            i.fa.fa-spinner.fa-spin
                                    .form-group
                                        label
                                            | Allotee Name
                                        input.form-control(type='text', v-model='allotee_name', placeholder='Enter your Allotee Name')
                                        p.text-danger.text-right(v-if='validation.hasError("allotee_name")') {{ validation.firstError('allotee_name') }}
                                    .form-group
                                        label
                                            | Contact No.
                                        input.form-control(type='text', v-model='contact_no', placeholder='Enter your Contact Number')
                                        p.text-danger.text-right(v-if='validation.hasError("contact_no")') {{ validation.firstError('contact_no') }}
                                    .form-group
                                        label
                                            | E-Mail
                                        input.form-control(type='text', v-model='allotee_email', placeholder='Enter your E-Mail')
                                        p.text-danger.text-right(v-if='validation.hasError("allotee_email")') {{ validation.firstError('allotee_email') }}
                                .col-md-4
                                    .form-group
                                        label
                                            | Broker
                                        .row
                                            .col-md-10
                                                div.text-center(v-if='dataLoad2')
                                                    i.fa.fa-refresh.fa-spin.fa-fw.fa-2x
                                                template(v-else)
                                                    select.form-control(v-model='sel_broker')
                                                        option(value='') Select Broker
                                                        option(v-for='(row, key, ind) in brokersData' v-bind:value='key') {{ row.name }} | {{ row.contact_num }}
                                                    p.text-danger.text-right(v-if='validation.hasError("sel_broker")') {{ validation.firstError('sel_broker') }}
                                            .col-md-2.icon-container
                                                ul.ul-action
                                                    li
                                                        a(href='#', data-toggle='modal', data-target='#add_broker')
                                                            i.ti-plus
                                    .form-group
                                        label
                                            | Type
                                        div.text-center(v-if='dataLoad3')
                                            i.fa.fa-refresh.fa-spin.fa-fw.fa-2x
                                        template(v-else)
                                            select.form-control(v-model='sel_type')
                                                option(value='') Select Type
                                                option(v-for='(row, key, ind) in proTypesData' v-bind:value='key') {{ row.name }}
                                            p.text-danger.text-right(v-if='validation.hasError("sel_type")') {{ validation.firstError('sel_type') }}
                                    template(v-if="sel_type !== ''")
                                        .form-group
                                            label
                                                | {{ proTypesData[sel_type].name }} No.
                                            .row
                                                .col-md-10
                                                    div.text-center(v-if='dataLoad4')
                                                        i.fa.fa-refresh.fa-spin.fa-fw.fa-2x
                                                    template(v-else)
                                                        select.form-control(v-model='sel_pro_type_no')
                                                            option(value='') Select {{ proTypesData[sel_type].name }} No.
                                                            option(v-for='(row, key, ind) in proTypesSubData' v-bind:value='key') {{ row.name }}
                                                        p.text-danger.text-right(v-if='validation.hasError("sel_pro_type_no")') {{ validation.firstError('sel_pro_type_no') }}
                                                        .text-right(v-if='validation.isValidating("sel_pro_type_no")')
                                                            i.fa.fa-spinner.fa-spin
                                                .col-md-2.icon-container
                                                    ul.ul-action
                                                        li
                                                            a(href='#', data-toggle='modal', data-target='#add_type_items')
                                                                i.ti-plus
                                    .form-group
                                        label
                                            | Document Year
                                        input.form-control.yearpicker.doc_year(type='text', placeholder='Enter Document Year')
                                        p.text-danger.text-right(v-if='validation.hasError("doc_year")') {{ validation.firstError('doc_year') }}
                                    .form-group
                                        label
                                            | Booking Date
                                        input.form-control.datepicker.booking_date(type='text', placeholder='Enter your Booking Date')
                                        p.text-danger.text-right(v-if='validation.hasError("booking_date")') {{ validation.firstError('booking_date') }}
                                .col-md-4
                                    .form-group
                                        label
                                            | Selling Price
                                        input.form-control(type='text', v-model='selling_price', placeholder='Enter your Selling Price')
                                        p.text-danger.text-right(v-if='validation.hasError("selling_price")') {{ validation.firstError('selling_price') }}
                                    .form-group
                                        label
                                            | Booking Amount
                                        input.form-control(type='text', v-model='booking_amount', placeholder='Enter your Booking Amount')
                                        p.text-danger.text-right(v-if='validation.hasError("booking_amount")') {{ validation.firstError('booking_amount') }}
                                    .form-group
                                        label
                                            | Installment
                                        input.form-control(type='text', v-model='payment_installment', placeholder='Enter your Installment')
                                        p.text-danger.text-right(v-if='validation.hasError("payment_installment")') {{ validation.firstError('payment_installment') }}
                                    .form-group
                                        label
                                            | Payment Plan
                                        input.form-control(type='text', v-bind:value='payment_plan', placeholder='Enter your Payment Plan' disabled="disabled")
                            h2 Account Detail
                            .row.detail-heading
                                .col-md-1 Account Code
                                .col-md-2 Account Description
                                .col-md-4 Remark
                                .col-md-1 Quantity
                                .col-md-2 Debit
                                .col-md-2 Credit
                            .detail-Content.form-group
                                template(v-for='row, ind in rows')
                                    .row(v-bind:class='"row-"+ind')
                                        .col-md-1.padding-right-0
                                            get-codes(v-bind:project='sel_project' v-bind:code='row.code' v-on:name_change="changeCode($event, ind)")
                                        .col-md-2.padding-none
                                            input.form-control(type='text' v-bind:value="row.code_name" disabled='disabled')
                                        .col-md-4.padding-none
                                            input.form-control(type='text' v-model='row.remarks')
                                        .col-md-1.padding-none
                                            input.form-control(type='text' v-model='row.quantity')
                                        .col-md-2.padding-none
                                            input.form-control(type='text' v-model='row.debit')
                                        .col-md-2.padding-left-0
                                            input.form-control(type='text' v-model='row.credit')
                                .row.Total
                                    .col-md-2.padding-right-0
                                        p.margin-bottom-0(style='line-height: 33px;')
                                            | JV Difference
                                            | < Debit / Credit >
                                    .col-md-2.padding-none
                                        input.form-control(type='text' disabled='disabled' v-bind:value='total_debit - total_credit')
                                    .col-md-2.padding-none
                                    .col-md-2.padding-none
                                        h3.margin-bottom-0(style='line-height: 33px;') Total
                                    .col-md-2.padding-none
                                        input.form-control(type='text' v-bind:value='total_debit' disabled='disabled')
                                    .col-md-2.padding-left-0
                                        input.form-control(type='text' v-bind:value='total_credit' disabled='disabled')
                    .row
                        .col-md-4.pull-right
                            button.btn.btn-primary.btn-wide.pull-right(v-if="inProcess" type='button' disabled='disabled')
                                i.fa.fa-refresh.fa-spin.fa-fw
                            template(v-else)
                                button.btn.btn-primary.btn-wide.pull-right(v-if='updateV' type='button' v-on:click.prevent='updateVoucher')
                                    | Update&nbsp;
                                    i.fa.fa-arrow-circle-right
                                button.btn.btn-primary.btn-wide.pull-right(v-else type='button' v-on:click.prevent='addVoucher')
                                    | Submit&nbsp;
                                    i.fa.fa-arrow-circle-right
    add-broker-model
    add-type-items-model
